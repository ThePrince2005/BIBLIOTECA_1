<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
    <%= typeof title !=='undefined' ? title : 'Biblioteca Escolar' %>
</title>
<link rel="icon" type="image/png" href="/logo.png">

<script>
    (function () {
        const root = document.documentElement;
        const THEME_KEY = 'biblioteca:theme-preference';
        const CONTRAST_KEY = 'biblioteca:contrast';

        try {
            const storedTheme = localStorage.getItem(THEME_KEY);
            if (storedTheme === 'dark' || storedTheme === 'light') {
                root.setAttribute('data-theme', storedTheme);
            } else {
                root.removeAttribute('data-theme');
            }

            if (localStorage.getItem(CONTRAST_KEY) === 'true') {
                root.classList.add('contrast-boost');
            }


        } catch (err) {
            console.warn('Preferencias de tema no disponibles', err);
        }
    })();
</script>

<!-- Google Fonts: Poppins -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- FontAwesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- AOS Animation Library -->
<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />

<!-- Global Styles -->
<link rel="stylesheet" href="/css/global.css">
<link rel="stylesheet" href="/css/partials.css?v=4">
<link rel="stylesheet" href="/css/mobile-tables.css">

<!-- Sistema de DiseÃ±o Unificado -->
<link rel="stylesheet" href="/css/core/design-system.css">
<link rel="stylesheet" href="/css/core/animations.css">
<link rel="stylesheet" href="/css/core/themes.css">

<!-- Componentes Modernos -->
<link rel="stylesheet" href="/css/components/components.css">
<link rel="stylesheet" href="/css/components/tables-modern.css">
<link rel="stylesheet" href="/css/components/export-dropdown.css">

<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11" defer></script>

<!-- AOS JS -->
<script src="https://unpkg.com/aos@next/dist/aos.js" defer></script>

<!-- Theme Manager - Debe cargarse temprano -->
<script src="/js/core/theme.js" defer></script>